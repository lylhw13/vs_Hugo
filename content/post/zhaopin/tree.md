---
title: "Tree"
date: 2020-06-11T22:21:50+08:00
draft: true
---

平衡树是为了解决二叉查找树退化为链表的情况，而红黑树是为了解决平衡树在插入、删除等操作需要频繁调整的情况。

B树的两个明显特点:
- 树内的每个节点都存储数据
- 叶子节点之间无指针相邻
由于B树中各节点之间没有指针相邻，因此B树不适合做一些数据遍历操作。

B+树的两个明显特点:
- 数据只出现在叶子节点
- 所有叶子节点增加了一个链指针

Mysql是关系型数据库，而Mongodb是非关系型数据
Mysql中数据遍历操作比较多，所以用B+树作为索引结构。而Mongodb是做单一查询比较多，数据遍历操作比较少，所以用B树作为索引结构。

AVL树和红黑树基本都是存储在内存中才会使用的数据结构，



AVL 树（平衡二叉树）和红黑树（二叉查找树）基本都是存储在内存中才会使用的数据结构。涉及到磁盘上查询的数据结构，一般都用 B+ 树。

在大规模数据存储的时候，红黑树往往出现由于树的深度过大而造成磁盘IO读写过于频繁，磁盘IO代价主要花费在查找所需的柱面上，进而导致效率低下的情况。而B树可以有多个子女，从几十到上千，可以降低树的高度。

页是InnoDB存储引擎管理数据库的最小磁盘单位，一个页中包括很多数据行。这样每个节点只需要一次I/O就可以完全载入，提高效率。在实际实现B-Tree还需要使用如下技巧：每次新建节点时，直接申请一个页的空间，这样就保证一个节点物理上也存储在一个页里，加之计算机存储分配都是按页对齐的，就实现了一个node只需一次I/O。
