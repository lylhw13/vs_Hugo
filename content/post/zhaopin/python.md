---
title: "Python"
date: 2020-08-20T11:13:16+08:00
draft: true
---

只要 Python 函数的定义体中有 yield 关键字，该函数就是生成器函数。调用生成器函数时，会返回一个生成器对象。也就是说，生成器函数是生成器工厂。

生成器表达式可以理解为列表推导的惰性版本：不会迫切地构建列表，而是返回一个生成器，按需惰性生成元素。也就是说，如果列表推导是制造列表的工厂，那么生成器表达式就是制造生成器的工厂。
```python
res1 = [x*3 for x in gen_AB()]  # 列表推导
res2 = (x*3 for x in gen_AB())  # 生成器表达式
```

协程的作用是在同一个线程中通过保存代码执行段状态，进行代码段的分次执行，以及多个代码段的交织执行。每个代码段可以成为一个协程。
协程是在线程之上由“用户”构建的并发单元，对OS来说无感知，协程的切换由用户自己管理和调度。
协程的好处是避免了线程之间的频换切换

协程因为是非抢占式，所以需要用户自己释放使用权来切换到其他协程，因此同一时间其实只有一个协程拥有运行权，相当于单线程的能力。

协程的好处：
- 跨平台
- 跨体系架构
- 无需线程上下文切换的开销
- 无需原子操作锁定及同步的开销

协程通常是纯软件实现的多任务，与CPU和操作系统通常没有关系，所以没有理论上限。

唯一的缺点似乎就是：它不能同时将 CPU 的多个核用上。