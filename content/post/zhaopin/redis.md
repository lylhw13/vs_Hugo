---
title: "Redis"
date: 2020-08-08T15:06:47+08:00
draft: true
---

redis 持久化有哪几种方式，怎么选？
redis 主从同步是怎样的过程？
redis 的 zset 怎么实现的？
redis key 的过期策略
redis 哨兵和集群
hashmap 是怎样实现的？

让你设计一个限流的系统怎么做？ 令牌桶
让你设计一个延时任务系统怎么做 说了两个方案，一个是使用 redis 的 ZSET 来实现，考虑分片来抗高并发，使用 redis 的持久化来实现落地，使用 redis 的哨兵实现故障转移。 一个是使用时间轮的方法。

# redis 过期键删除策略
有三种基本的删除策略：
- 定时删除：设置定时器，让定时器在键过期时间来临时，立即执行对键对删除操作
- 惰性删除
- 定期删除：每隔一定时间删除

Redis 采用惰性删除和定期删除两种策略。

# redis内存回收
Redis中采用两种算法进行内存回收，引用计数算法以及LRU（Least Re）算法

# redis 主从同步
1. 从服务器向主服务器发送SYNC命令
2. 收到SYNC命令，主服务器执行BGSAVE命令，在后台生成一个RDB文件，并使用一个缓冲区记录从现在开始执行的所有写命令。
3. 主服务器发送RDB文件给从服务器，从服务器载入RDB文件，执行同步
4. 主服务器发送缓冲区的命令给从服务器。

# 

